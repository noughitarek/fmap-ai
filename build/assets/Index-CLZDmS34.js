import{r as c,W as A,j as e,Y as L,a as p,B as j,y as E}from"./app-dtYpB2pc.js";import{P as B}from"./Page-AWksGIBO.js";import{W as F,S as k,C as W,H as $,f as w,b as H,U as P,c as R,d as U,e as q}from"./Webmaster-CrnXKKSZ.js";import{D as z}from"./DeleteModal-ByeN5Flg.js";import{h as Y}from"./button-BLv4ZLOr.js";import"./createLucideIcon-CyBU6K7F.js";import"./facebook-Dv8De7Q2.js";import"./save-B9B5oMJb.js";import"./transition-mFquH0Tb.js";import"./render-CcaDLSFt.js";import"./Modal-3p-ZljzZ.js";import"./disabled-CQgWAbIn.js";const oe=({auth:g,groups:o,from:J,to:K,total:O,menu:y})=>{const[N,d]=c.useState(!1),[v,h]=c.useState(!1),[Q,b]=c.useState(!1),[i,D]=c.useState(o),m=A({group:0}),C=s=>{const t=Date.now()-s,a=60*1e3,x=60*a,u=24*x;return t<a?"few seconds ago":t<x?`${Math.floor(t/a)} minutes ago`:t<u?`${Math.floor(t/x)} hours ago`:`${Math.floor(t/u)} days ago`},l=i.length>0?i.reduce((s,r)=>new Date(r.updated_at).getTime()>new Date(s.updated_at).getTime()?r:s):null,T=l&&l.updated_by?l.updated_by.name:"",S=l?C(new Date(l.updated_at).getTime()):"",M=async()=>{h(!0);try{await m.delete(route("titles.destroy",{id:m.data.group})),j.success("Group of titles has been deleted successfully"),E.get(route("titles.index"))}catch(s){j.error("Error deleting the group of titles"),console.error("Error details:",s)}finally{h(!1),d(!1)}},G=(s,r)=>{s.preventDefault(),m.setData({group:r}),d(!0)},_=()=>{d(!1)},I=s=>{b(s.target.value!="");const r=o||[],t=s.target.value.toLowerCase(),n=r.filter(a=>a.name&&a.name.toLowerCase().includes(t)||a.description&&a.description.toLowerCase().includes(t)||a.created_by&&a.created_by.name.toLowerCase().includes(t));D(n)};return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:"Titles"}),e.jsx(F,{user:g.user,menu:y,breadcrumb:e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Titles"}),children:e.jsx(B,{title:"Titles",header:e.jsx(e.Fragment,{}),children:e.jsx("div",{className:"grid grid-cols-12 gap-6 mt-8",children:e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"intro-y flex flex-col-reverse sm:flex-row items-center",children:[e.jsxs("div",{className:"w-full sm:w-auto relative mr-auto mt-3 sm:mt-0",children:[e.jsx(k,{className:"w-4 h-4 absolute my-auto inset-y-0 ml-3 left-0 z-10 text-slate-500"}),e.jsx("input",{type:"text",className:"form-control w-full sm:w-64 box px-10",placeholder:"Search title",onChange:I}),e.jsx("div",{className:"inbox-filter dropdown absolute inset-y-0 mr-3 right-0 flex items-center","data-tw-placement":"bottom-start",children:e.jsx(W,{className:"dropdown-toggle w-4 h-4 cursor-pointer text-slate-500",role:"button","aria-expanded":"false","data-tw-toggle":"dropdown"})})]}),e.jsx("div",{className:"w-full sm:w-auto flex",children:e.jsx(p,{href:route("titles.create"),className:"btn btn-primary shadow-md mr-2",children:"Create Group of Titles"})})]}),e.jsx("div",{className:"intro-y overflow-auto",children:e.jsxs("table",{className:"table table-report -mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"whitespace-nowrap",children:"#"}),e.jsx("th",{className:"whitespace-nowrap",children:"Titles"}),e.jsx("th",{className:"whitespace-nowrap",children:"Created"}),e.jsx("th",{className:"whitespace-nowrap",children:"Action"})]})}),e.jsx("tbody",{children:i&&i.map((s,r)=>e.jsxs("tr",{className:"intro-x",children:[e.jsxs("td",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.id})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.description&&s.description.length>10?s.description.substring(0,10)+"...":s.description})]})]}),e.jsx("td",{children:s.titles.map((t,n)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-4 w-4 text-gray-500 mr-1"}),t.title&&t.title.length>20?t.title.substring(0,20)+"...":t.title]},n))}),e.jsxs("td",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.created_by.name})]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(R,{className:"h-4 w-4 text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]}),e.jsx("td",{className:"table-report__action w-56",children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsxs(p,{className:"flex items-center mr-3",href:route("titles.edit",{group:s.id}),children:[e.jsx(U,{className:"w-4 h-4 mr-1"})," Edit"]}),e.jsxs(Y,{className:"flex items-center text-danger",onClick:t=>G(t,s.id),children:[e.jsx(q,{className:"w-4 h-4 mr-1"})," Delete"]})]})})]},r))})]})}),e.jsx(z,{showDeleteModal:N,handleDeleteCancel:_,handleDeleteConfirm:M,deleting:v}),e.jsx("div",{className:"p-5 flex flex-col sm:flex-row items-center text-center sm:text-left text-slate-500",children:l&&e.jsxs("div",{className:"sm:ml-auto mt-2 sm:mt-0",children:["Last activity: ",S," by ",T]})})]})})})})]})};export{oe as default};
