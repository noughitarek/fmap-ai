import{r as C,W as w,j as e,Y as P,a as F,B as h,y as k}from"./app-BoZTgQsX.js";import{W as D}from"./Webmaster-Bv87JR7w.js";import{P as G}from"./Page--3rH9CWd.js";import{G as x,C as _}from"./CustomTextarea-DEG0QHIv.js";import{C as q}from"./CustomTextInput-Z86LNiYJ.js";import{h as l}from"./button-B2sf8A_v.js";import"./createLucideIcon-D7_ziMnv.js";import"./facebook-KEMOOEa1.js";import"./save-DI95csvW.js";import"./transition-DzzVVFzt.js";import"./render-CcWegbys.js";import"./disabled-CPkVuo-X.js";const H=({auth:f,menu:u,group:i})=>{const[n,m]=C.useState(!1),r=w({name:i.name||"",description:i.description||"",old_photos:i.old_photos||[],photos:[]}),c=s=>{const{name:t,type:a,value:o,files:p}=s.target;if(a==="file"){if(p){const E=Array.from(p);r.setData("photos",E)}}else r.setData(t,o)},j=async s=>{console.log(r.data),s.preventDefault(),m(!0),r.post(route("photos.update",{group:i.id}),{forceFormData:!0,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{h.success("Group of photos has been created successfully"),k.get(route("photos.index"))},onError:t=>{h.error("Error creating the group of photos"),console.error("Error:",t)},onFinish:()=>{m(!1)}})},g=s=>{s.preventDefault();const t=new File([""],"emptyfile.jpg",{type:"image/jpeg"});r.setData(a=>({...a,photos:[...a.photos,t]}))},N=s=>{r.setData(t=>({...t,photos:t.photos.filter((a,o)=>o!==s)}))},b=s=>{r.setData(t=>({...t,old_photos:t.old_photos.filter((a,o)=>o!==s)}))},v=(s,t)=>{const a=[...r.data.photos];a[s]=t,r.setData("photos",a)},d=e.jsx(l,{className:"btn btn-primary",onClick:g,children:"More"}),y=e.jsx(l,{className:"btn btn-primary",disabled:n,onClick:j,children:n?"Editing":"Edit"});return e.jsxs(e.Fragment,{children:[e.jsx(P,{title:"Edit a group of photos"}),e.jsx(D,{user:f.user,menu:u,breadcrumb:e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"breadcrumb-item","aria-current":"page",children:e.jsx(F,{href:route("photos.index"),children:"Photos"})}),e.jsx("li",{className:"breadcrumb-item","aria-current":"page",children:"Groups"}),e.jsx("li",{className:"breadcrumb-item","aria-current":"page",children:i.name}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Update"})]}),children:e.jsxs(G,{title:"Edit a group of photos",header:e.jsx(e.Fragment,{}),children:[e.jsxs(x,{title:"Groups information",children:[e.jsx(q,{title:"Name",value:r.data.name,name:"name",description:"Enter the name of the group",required:!0,handleChange:c,instructions:"Minimum 5 caracters"}),e.jsx(_,{title:"Description",value:r.data.description,name:"description",description:"Enter the description of the group",required:!1,handleChange:c,instructions:"Not required"})]}),e.jsxs(x,{title:"Groups photos",header:d,children:[r.data.old_photos.map((s,t)=>e.jsxs("div",{className:"form-inline items-start flex-col xl:flex-row mt-5 pt-5 first:mt-0 first:pt-0 pb-4",children:[e.jsx("div",{className:"form-label xl:w-64 xl:!mr-10",children:e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"font-medium",children:["Old photo ",t+1]})}),e.jsx("div",{className:"leading-relaxed text-slate-500 text-xs mt-3",children:"description"})]})}),e.jsx("div",{className:"w-10 h-10 flex-none image-fit rounded-full overflow-hidden",children:e.jsx("img",{alt:s||"",src:s||""})}),e.jsx("div",{className:"w-full mt-3 xl:mt-0 flex-1",children:s||""}),e.jsx("div",{className:"mt-3 xl:mt-0 ms-2",children:e.jsx(l,{className:"btn btn-primary",onClick:()=>b(t),children:"-"})})]},t)),r.data.photos.map((s,t)=>e.jsxs("div",{className:"form-inline items-start flex-col xl:flex-row mt-5 pt-5 first:mt-0 first:pt-0 pb-4",children:[e.jsx("div",{className:"form-label xl:w-64 xl:!mr-10",children:e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"font-medium",children:["Photo ",t+1]}),e.jsx("div",{className:"ml-2 px-2 py-0.5 bg-slate-200 text-slate-600 dark:bg-darkmode-300 dark:text-slate-400 text-xs rounded-md",children:"Required"})]}),e.jsx("div",{className:"leading-relaxed text-slate-500 text-xs mt-3",children:"description"})]})}),e.jsx("div",{className:"w-full mt-3 xl:mt-0 flex-1",children:e.jsx("div",{className:"w-full mt-3 xl:mt-2 flex-1",children:e.jsx("input",{type:"file",accept:"image/*",required:!0,className:"form-control",onChange:a=>{if(a.target.files&&a.target.files[0]){const o=a.target.files[0];v(t,o)}}})})}),e.jsx("div",{className:"mt-3 xl:mt-0 ms-2",children:e.jsx(l,{className:"btn btn-primary",onClick:()=>N(t),children:"-"})})]},t)),d]}),e.jsx("br",{}),y]})})]})};export{H as default};
