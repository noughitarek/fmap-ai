import{r as v,W as y,j as e,Y as P,a as F,B as d,y as D}from"./app-BoZTgQsX.js";import{W as E}from"./Webmaster-Bv87JR7w.js";import{P as G}from"./Page--3rH9CWd.js";import{G as h,C as k}from"./CustomTextarea-DEG0QHIv.js";import{C as w}from"./CustomTextInput-Z86LNiYJ.js";import{h as i}from"./button-B2sf8A_v.js";import"./createLucideIcon-D7_ziMnv.js";import"./facebook-KEMOOEa1.js";import"./save-DI95csvW.js";import"./transition-DzzVVFzt.js";import"./render-CcWegbys.js";import"./disabled-CPkVuo-X.js";const H=({auth:u,menu:x})=>{const[n,l]=v.useState(!1),r=y({name:"",description:"",photos:[]}),m=o=>{const{name:t,type:s,value:a,files:p}=o.target;if(s==="file"){if(p){const C=Array.from(p);r.setData("photos",C)}}else r.setData(t,a)},f=async o=>{o.preventDefault(),l(!0),r.post(route("photos.store"),{forceFormData:!0,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{d.success("Group of photos has been created successfully"),D.get(route("photos.index"))},onError:t=>{d.error("Error creating the group of photos"),console.error("Error:",t)},onFinish:()=>{l(!1)}})},j=o=>{o.preventDefault();const t=new File([""],"emptyfile.jpg",{type:"image/jpeg"});r.setData(s=>({...s,photos:[...s.photos,t]}))},g=o=>{r.setData(t=>({...t,photos:t.photos.filter((s,a)=>a!==o)}))},b=(o,t)=>{const s=[...r.data.photos];s[o]=t,r.setData("photos",s)},c=e.jsx(i,{className:"btn btn-primary",onClick:j,children:"More"}),N=e.jsx(i,{className:"btn btn-primary",disabled:n,onClick:f,children:n?"Creating":"Create"});return e.jsxs(e.Fragment,{children:[e.jsx(P,{title:"Create a group of photos"}),e.jsx(E,{user:u.user,menu:x,breadcrumb:e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"breadcrumb-item","aria-current":"page",children:e.jsx(F,{href:route("photos.index"),children:"Photos"})}),e.jsx("li",{className:"breadcrumb-item","aria-current":"page",children:"Groups"}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Create"})]}),children:e.jsxs(G,{title:"Create a group of photos",header:e.jsx(e.Fragment,{}),children:[e.jsxs(h,{title:"Groups information",children:[e.jsx(w,{title:"Name",value:r.data.name,name:"name",description:"Enter the name of the group",required:!0,handleChange:m,instructions:"Minimum 5 caracters"}),e.jsx(k,{title:"Description",value:r.data.description,name:"description",description:"Enter the description of the group",required:!1,handleChange:m,instructions:"Not required"})]}),e.jsxs(h,{title:"Groups photos",header:c,children:[r.data.photos.map((o,t)=>e.jsxs("div",{className:"form-inline items-start flex-col xl:flex-row mt-5 pt-5 first:mt-0 first:pt-0 pb-4",children:[e.jsx("div",{className:"form-label xl:w-64 xl:!mr-10",children:e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"font-medium",children:["Photo ",t+1]}),e.jsx("div",{className:"ml-2 px-2 py-0.5 bg-slate-200 text-slate-600 dark:bg-darkmode-300 dark:text-slate-400 text-xs rounded-md",children:"Required"})]}),e.jsx("div",{className:"leading-relaxed text-slate-500 text-xs mt-3",children:"description"})]})}),e.jsx("div",{className:"w-full mt-3 xl:mt-0 flex-1",children:e.jsxs("div",{className:"w-full mt-3 xl:mt-2 flex-1",children:[e.jsx("input",{type:"file",accept:"image/*",required:!0,className:"form-control",onChange:s=>{if(s.target.files&&s.target.files[0]){const a=s.target.files[0];b(t,a)}}}),e.jsx("div",{className:"form-help text-right mt-2",children:"Photo"})]})}),e.jsx("div",{className:"mt-3 xl:mt-0 ms-2",children:e.jsx(i,{className:"btn btn-primary",onClick:()=>g(t),children:"-"})})]},t)),c]}),e.jsx("br",{}),N]})})]})};export{H as default};
