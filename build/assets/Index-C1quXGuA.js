import{r as l,W as I,j as e,Y as T,a as f,B as j,y as A}from"./app-BoZTgQsX.js";import{P as E}from"./Page--3rH9CWd.js";import{W as B,S as F,C as k,H as W,f as $,b as H,L as P,U as R,c as U,d as q,e as z}from"./Webmaster-Bv87JR7w.js";import{D as Y}from"./DeleteModal-BRVWLj3w.js";import{h as J}from"./button-B2sf8A_v.js";import"./createLucideIcon-D7_ziMnv.js";import"./facebook-KEMOOEa1.js";import"./save-DI95csvW.js";import"./transition-DzzVVFzt.js";import"./render-CcWegbys.js";import"./Modal-Cj3Zi4tF.js";import"./disabled-CPkVuo-X.js";const de=({auth:w,groups:o,from:K,to:O,total:Q,menu:g})=>{const[y,d]=l.useState(!1),[N,h]=l.useState(!1),[V,v]=l.useState(!1),[n,b]=l.useState(o),m=I({group:0}),D=s=>{const t=Date.now()-s,a=60*1e3,x=60*a,p=24*x;return t<a?"few seconds ago":t<x?`${Math.floor(t/a)} minutes ago`:t<p?`${Math.floor(t/x)} hours ago`:`${Math.floor(t/p)} days ago`},i=n.length>0?n.reduce((s,r)=>new Date(r.updated_at).getTime()>new Date(s.updated_at).getTime()?r:s):null,C=i&&i.updated_by?i.updated_by.name:"",S=i?D(new Date(i.updated_at).getTime()):"",M=async()=>{h(!0);try{await m.delete(route("descriptions.destroy",{id:m.data.group})),j.success("Group of descriptions has been deleted successfully"),A.get(route("descriptions.index"))}catch(s){j.error("Error deleting the group of descriptions"),console.error("Error details:",s)}finally{h(!1),d(!1)}},G=(s,r)=>{s.preventDefault(),m.setData({group:r}),d(!0)},_=()=>{d(!1)},L=s=>{v(s.target.value!="");const r=o||[],t=s.target.value.toLowerCase(),c=r.filter(a=>a.name&&a.name.toLowerCase().includes(t)||a.description&&a.description.toLowerCase().includes(t)||a.created_by&&a.created_by.name.toLowerCase().includes(t));b(c)};return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Descriptions"}),e.jsx(B,{user:w.user,menu:g,breadcrumb:e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Descriptions"}),children:e.jsx(E,{title:"Descriptions",header:e.jsx(e.Fragment,{}),children:e.jsx("div",{className:"grid grid-cols-12 gap-6 mt-8",children:e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"intro-y flex flex-col-reverse sm:flex-row items-center",children:[e.jsxs("div",{className:"w-full sm:w-auto relative mr-auto mt-3 sm:mt-0",children:[e.jsx(F,{className:"w-4 h-4 absolute my-auto inset-y-0 ml-3 left-0 z-10 text-slate-500"}),e.jsx("input",{type:"text",className:"form-control w-full sm:w-64 box px-10",placeholder:"Search description",onChange:L}),e.jsx("div",{className:"inbox-filter dropdown absolute inset-y-0 mr-3 right-0 flex items-center","data-tw-placement":"bottom-start",children:e.jsx(k,{className:"dropdown-toggle w-4 h-4 cursor-pointer text-slate-500",role:"button","aria-expanded":"false","data-tw-toggle":"dropdown"})})]}),e.jsx("div",{className:"w-full sm:w-auto flex",children:e.jsx(f,{href:route("descriptions.create"),className:"btn btn-primary shadow-md mr-2",children:"Create Group of Descriptions"})})]}),e.jsx("div",{className:"intro-y overflow-auto",children:e.jsxs("table",{className:"table table-report -mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"whitespace-nowrap",children:"#"}),e.jsx("th",{className:"whitespace-nowrap",children:"Descriptions"}),e.jsx("th",{className:"whitespace-nowrap",children:"Created"}),e.jsx("th",{className:"whitespace-nowrap",children:"Action"})]})}),e.jsx("tbody",{children:n&&n.map((s,r)=>e.jsxs("tr",{className:"intro-x",children:[e.jsxs("td",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.id})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.description&&s.description.length>10?s.description.substring(0,10)+"...":s.description})]})]}),e.jsx("td",{children:s.descriptions.map((t,c)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-4 w-4 text-gray-500 mr-1"}),t.description&&t.description.length>20?t.description.substring(0,20)+"...":t.description]},c))}),e.jsxs("td",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.created_by.name})]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(U,{className:"h-4 w-4 text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]}),e.jsx("td",{className:"table-report__action w-56",children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsxs(f,{className:"flex items-center mr-3",href:route("descriptions.edit",{group:s.id}),children:[e.jsx(q,{className:"w-4 h-4 mr-1"})," Edit"]}),e.jsxs(J,{className:"flex items-center text-danger",onClick:t=>G(t,s.id),children:[e.jsx(z,{className:"w-4 h-4 mr-1"})," Delete"]})]})})]},r))})]})}),e.jsx(Y,{showDeleteModal:y,handleDeleteCancel:_,handleDeleteConfirm:M,deleting:N}),e.jsx("div",{className:"p-5 flex flex-col sm:flex-row items-center text-center sm:text-left text-slate-500",children:i&&e.jsxs("div",{className:"sm:ml-auto mt-2 sm:mt-0",children:["Last activity: ",S," by ",C]})})]})})})})]})};export{de as default};
