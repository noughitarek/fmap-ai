import{r as w,W as k,j as e,Y as F,a as G,B as u,y as _}from"./app-dtYpB2pc.js";import{W as D}from"./Webmaster-CrnXKKSZ.js";import{P as q}from"./Page-AWksGIBO.js";import{G as f,C as B}from"./CustomTextarea-Pr9TB7mp.js";import{C as S}from"./CustomTextInput-CRGU20-H.js";import{h as l}from"./button-BLv4ZLOr.js";import"./createLucideIcon-CyBU6K7F.js";import"./facebook-Dv8De7Q2.js";import"./save-B9B5oMJb.js";import"./transition-mFquH0Tb.js";import"./render-CcaDLSFt.js";import"./disabled-CQgWAbIn.js";const K=({auth:j,menu:N,group:a})=>{const[n,m]=w.useState(!1),r=k({name:a.name||"",description:a.description||"",old_photos:a.old_photos||[],photos:[]}),c=s=>{const{name:t,type:o,value:i,files:h}=s.target;if(o==="file"&&h){const P=Array.from(h);r.setData(p=>{const x=[...p.photos];return x[parseInt(t)]=P,{...p,photos:x}})}else r.setData(t,i)},b=async s=>{console.log(r.data),s.preventDefault(),m(!0),r.post(route("photos.update",{group:a.id}),{forceFormData:!0,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{u.success("Group of photos has been created successfully"),_.get(route("photos.index"))},onError:t=>{u.error("Error creating the group of photos"),console.error("Error:",t)},onFinish:()=>{m(!1)}})},g=s=>{s.preventDefault(),r.setData(t=>({...t,photos:[...t.photos,[]]}))},v=s=>{r.setData(t=>({...t,photos:t.photos.filter((o,i)=>i!==s)}))},y=s=>{r.setData(t=>({...t,old_photos:t.old_photos.filter((o,i)=>i!==s)}))},E=(s,t)=>{const o=[...r.data.photos];o[s]=Array.from(t),r.setData("photos",o)},d=e.jsx(l,{className:"btn btn-primary",onClick:g,children:"More"}),C=e.jsx(l,{className:"btn btn-primary",disabled:n,onClick:b,children:n?"Editing":"Edit"});return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Edit a group of photos"}),e.jsx(D,{user:j.user,menu:N,breadcrumb:e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"breadcrumb-item","aria-current":"page",children:e.jsx(G,{href:route("photos.index"),children:"Photos"})}),e.jsx("li",{className:"breadcrumb-item","aria-current":"page",children:"Groups"}),e.jsx("li",{className:"breadcrumb-item","aria-current":"page",children:a.name}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Update"})]}),children:e.jsxs(q,{title:"Edit a group of photos",header:e.jsx(e.Fragment,{}),children:[e.jsxs(f,{title:"Groups information",children:[e.jsx(S,{title:"Name",value:r.data.name,name:"name",description:"Enter the name of the group",required:!0,handleChange:c,instructions:"Minimum 5 caracters"}),e.jsx(B,{title:"Description",value:r.data.description,name:"description",description:"Enter the description of the group",required:!1,handleChange:c,instructions:"Not required"})]}),e.jsxs(f,{title:"Groups photos",header:d,children:[r.data.old_photos.map((s,t)=>e.jsxs("div",{className:"form-inline items-start flex-col xl:flex-row mt-5 pt-5 first:mt-0 first:pt-0 pb-4",children:[e.jsx("div",{className:"form-label xl:w-64 xl:!mr-10",children:e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"font-medium",children:["Old photo ",t+1]})}),e.jsx("div",{className:"leading-relaxed text-slate-500 text-xs mt-3",children:"description"})]})}),e.jsx("div",{className:"w-10 h-10 flex-none image-fit rounded-full overflow-hidden",children:e.jsx("img",{alt:s||"",src:s||""})}),e.jsx("div",{className:"w-full mt-3 xl:mt-0 flex-1",children:s||""}),e.jsx("div",{className:"mt-3 xl:mt-0 ms-2",children:e.jsx(l,{className:"btn btn-primary",onClick:()=>y(t),children:"-"})})]},t)),r.data.photos.map((s,t)=>e.jsxs("div",{className:"form-inline items-start flex-col xl:flex-row mt-5 pt-5 first:mt-0 first:pt-0 pb-4",children:[e.jsx("div",{className:"form-label xl:w-64 xl:!mr-10",children:e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"font-medium",children:["Photo ",t+1]}),e.jsx("div",{className:"ml-2 px-2 py-0.5 bg-slate-200 text-slate-600 dark:bg-darkmode-300 dark:text-slate-400 text-xs rounded-md",children:"Required"})]}),e.jsx("div",{className:"leading-relaxed text-slate-500 text-xs mt-3",children:"description"})]})}),e.jsx("div",{className:"w-full mt-3 xl:mt-0 flex-1",children:e.jsx("div",{className:"w-full mt-3 xl:mt-2 flex-1",children:e.jsx("input",{type:"file",accept:"image/*",required:!0,className:"form-control",onChange:o=>{o.target.files&&E(t,o.target.files)},multiple:!0})})}),e.jsx("div",{className:"mt-3 xl:mt-0 ms-2",children:e.jsx(l,{className:"btn btn-primary",onClick:()=>v(t),children:"-"})})]},t)),d]}),e.jsx("br",{}),C]})})]})};export{K as default};
