import{r as c,W as I,j as e,Y as T,a as f,B as j,y as A}from"./app-BoZTgQsX.js";import{P as L}from"./Page--3rH9CWd.js";import{W as E,S as k,C as B,H as F,f as z,b as W,U as $,c as H,d as R,e as U}from"./Webmaster-Bv87JR7w.js";import{D as q}from"./DeleteModal-BRVWLj3w.js";import{h as Y}from"./button-B2sf8A_v.js";import"./createLucideIcon-D7_ziMnv.js";import"./facebook-KEMOOEa1.js";import"./save-DI95csvW.js";import"./transition-DzzVVFzt.js";import"./render-CcWegbys.js";import"./Modal-Cj3Zi4tF.js";import"./disabled-CPkVuo-X.js";const ie=({auth:w,groups:i,from:J,to:K,total:O,menu:g})=>{const[N,d]=c.useState(!1),[y,x]=c.useState(!1),[Q,v]=c.useState(!1),[l,b]=c.useState(i),m=I({group:0}),D=s=>{const t=Date.now()-s,a=60*1e3,h=60*a,p=24*h;return t<a?"few seconds ago":t<h?`${Math.floor(t/a)} minutes ago`:t<p?`${Math.floor(t/h)} hours ago`:`${Math.floor(t/p)} days ago`},o=l.length>0?l.reduce((s,r)=>new Date(r.updated_at).getTime()>new Date(s.updated_at).getTime()?r:s):null,C=o&&o.updated_by?o.updated_by.name:"",S=o?D(new Date(o.updated_at).getTime()):"",M=async()=>{x(!0);try{await m.delete(route("photos.destroy",{id:m.data.group})),j.success("Group of photos has been deleted successfully"),A.get(route("photos.index"))}catch(s){j.error("Error deleting the group of photos"),console.error("Error details:",s)}finally{x(!1),d(!1)}},_=(s,r)=>{s.preventDefault(),m.setData({group:r}),d(!0)},G=()=>{d(!1)},P=s=>{v(s.target.value!="");const r=i||[],t=s.target.value.toLowerCase(),n=r.filter(a=>a.name&&a.name.toLowerCase().includes(t)||a.description&&a.description.toLowerCase().includes(t)||a.created_by&&a.created_by.name.toLowerCase().includes(t));b(n)};return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Photos"}),e.jsx(E,{user:w.user,menu:g,breadcrumb:e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Photos"}),children:e.jsx(L,{title:"Photos",header:e.jsx(e.Fragment,{}),children:e.jsx("div",{className:"grid grid-cols-12 gap-6 mt-8",children:e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"intro-y flex flex-col-reverse sm:flex-row items-center",children:[e.jsxs("div",{className:"w-full sm:w-auto relative mr-auto mt-3 sm:mt-0",children:[e.jsx(k,{className:"w-4 h-4 absolute my-auto inset-y-0 ml-3 left-0 z-10 text-slate-500"}),e.jsx("input",{type:"text",className:"form-control w-full sm:w-64 box px-10",placeholder:"Search photo",onChange:P}),e.jsx("div",{className:"inbox-filter dropdown absolute inset-y-0 mr-3 right-0 flex items-center","data-tw-placement":"bottom-start",children:e.jsx(B,{className:"dropdown-toggle w-4 h-4 cursor-pointer text-slate-500",role:"button","aria-expanded":"false","data-tw-toggle":"dropdown"})})]}),e.jsx("div",{className:"w-full sm:w-auto flex",children:e.jsx(f,{href:route("photos.create"),className:"btn btn-primary shadow-md mr-2",children:"Create Group of Photos"})})]}),e.jsx("div",{className:"intro-y overflow-auto",children:e.jsxs("table",{className:"table table-report -mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"whitespace-nowrap",children:"#"}),e.jsx("th",{className:"whitespace-nowrap",children:"Photos"}),e.jsx("th",{className:"whitespace-nowrap",children:"Created"}),e.jsx("th",{className:"whitespace-nowrap",children:"Action"})]})}),e.jsx("tbody",{children:l&&l.map((s,r)=>e.jsxs("tr",{className:"intro-x",children:[e.jsxs("td",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.id})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.description&&s.description.length>10?s.description.substring(0,10)+"...":s.description})]})]}),e.jsx("td",{children:s.photos.map((t,n)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 flex-none image-fit rounded-full overflow-hidden zoom-in",children:e.jsx("img",{"data-action":"zoom",alt:t.photo,src:t.photo})}),e.jsx("a",{href:t.photo,className:"ms-2",target:"_blank",children:t.photo&&t.photo.length>20?t.photo.substring(0,20)+"...":t.photo})]},n))}),e.jsxs("td",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"h-4 w-4 text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.created_by.name})]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(H,{className:"h-4 w-4 text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]}),e.jsx("td",{className:"table-report__action w-56",children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsxs(f,{className:"flex items-center mr-3",href:route("photos.edit",{group:s.id}),children:[e.jsx(R,{className:"w-4 h-4 mr-1"})," Edit"]}),e.jsxs(Y,{className:"flex items-center text-danger",onClick:t=>_(t,s.id),children:[e.jsx(U,{className:"w-4 h-4 mr-1"})," Delete"]})]})})]},r))})]})}),e.jsx(q,{showDeleteModal:N,handleDeleteCancel:G,handleDeleteConfirm:M,deleting:y}),e.jsx("div",{className:"p-5 flex flex-col sm:flex-row items-center text-center sm:text-left text-slate-500",children:o&&e.jsxs("div",{className:"sm:ml-auto mt-2 sm:mt-0",children:["Last activity: ",S," by ",C]})})]})})})})]})};export{ie as default};
